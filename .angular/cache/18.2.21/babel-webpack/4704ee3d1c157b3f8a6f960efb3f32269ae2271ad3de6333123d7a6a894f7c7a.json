{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let MovimentoService = /*#__PURE__*/(() => {\n  class MovimentoService {\n    constructor(http) {\n      this.http = http;\n      this.baseUrl = 'http://localhost:8080/api';\n    }\n    // GET /api/movimentos\n    getMovimentos() {\n      return this.http.get(`${this.baseUrl}/movimentos`).pipe(map(list => list.map(item => this.fromApi(item))));\n    }\n    // POST /api/movimentos\n    addMovimento(movimento) {\n      const body = {\n        mes: movimento.mes,\n        ano: movimento.ano,\n        codProduto: movimento.codigoProduto,\n        codCosif: movimento.descricaoProduto,\n        valor: movimento.valor,\n        descricao: movimento.descricao\n      };\n      return this.http.post(`${this.baseUrl}/movimentos`, body).pipe(map(res => this.fromApi(res)));\n    }\n    // GET /api/produtos\n    getProdutos() {\n      return this.http.get(`${this.baseUrl}/produtos`);\n    }\n    // GET /api/produtos/{codProduto}/cosifs\n    getProdutoCosif(codProduto) {\n      if (!codProduto) {\n        return this.http.get(`${this.baseUrl}/produtos` /* fallback */);\n      }\n      return this.http.get(`${this.baseUrl}/produtos/${encodeURIComponent(codProduto)}/cosifs`);\n    }\n    // transforma resposta da API para o modelo Movimento usado no frontend\n    fromApi(item) {\n      return {\n        mes: item.mes,\n        ano: item.ano,\n        codigoProduto: item.codProduto ?? item.codigoProduto ?? '',\n        descricaoProduto: item.codCosif ?? item.descricaoProduto ?? '',\n        nrLancamento: item.nrLancamento ?? item.numLancamento ?? 0,\n        descricao: item.descricao ?? '',\n        valor: item.valor ?? 0,\n        datMovimento: item.datMovimento ?? item.dataMovimento ?? undefined,\n        codUsuario: item.codUsuario ?? undefined\n      };\n    }\n    addMovimento(movimento) {}\n    static {\n      this.ɵfac = function MovimentoService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || MovimentoService)(i0.ɵɵinject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: MovimentoService,\n        factory: MovimentoService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return MovimentoService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}